<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="dark light" />
  <title>Smart Home Finds</title>
  <meta name="description" content="Curated home decor & smart upgrades." />
  <meta name="theme-color" content="#0b0c10" />
  <link rel="icon" href="assets/img/favicon.svg" type="image/svg+xml" />
  <link rel="manifest" href="manifest.webmanifest" />
  <link rel="preconnect" href="https://api.github.com" />
  <link rel="stylesheet" href="assets/css/style.css" />
</head>

<body>
  <header class="hero">
    <div class="hero__top">
      <div class="brand">
        <div class="brand__logo" aria-hidden="true"><span id="logoText">SHF</span></div>
        <div class="brand__text">
          <h1 id="brandName">Smart Home Finds</h1>
          <p id="brandTagline">Cozy ‚Ä¢ Elegant ‚Ä¢ Minimal ‚Äî curated home decor & smart upgrades.</p>
        </div>
      </div>

      <div class="hero__actions">
        <a class="pill pill--primary" id="btnPinterest" target="_blank" rel="noopener">Pinterest</a>
        <a class="pill" id="btnInstagram" target="_blank" rel="noopener">Instagram</a>
        <a class="pill" id="btnLinktree" target="_blank" rel="noopener">Linktree</a>
      </div>
    </div>

    <div class="controls">
      <div class="search">
        <input id="searchInput" type="search" placeholder="Cerca (es. candles, wall art, tray)..." autocomplete="off" />
      </div>

      <div class="chips" id="categoryChips" aria-label="Categorie"></div>

      <div class="toolbar">
        <button class="btn" id="btnRefresh" type="button" title="Aggiorna prodotti">‚ü≥ Refresh</button>

        <button class="btn" id="btnAdmin" type="button" title="Modalit√† admin">
          üîí Admin
        </button>

        <button class="btn" id="btnToken" type="button" title="Connetti token GitHub" hidden>
          üîë Token
        </button>

        <button class="btn btn--primary" id="btnAddProduct" type="button" title="Aggiungi prodotto" hidden>
          + Add Product
        </button>

        <button class="btn btn--ghost" id="btnDisclosure" type="button" aria-expanded="false">Disclosure</button>
      </div>

      <div class="disclosure" id="disclosureBox" hidden>
        <p id="disclosureText">
          Alcuni link potrebbero essere link affiliati. Come Amazon Associate potrei guadagnare da acquisti idonei.
        </p>
      </div>

      <div class="status">
        <span id="statusText">Caricamento prodotti‚Ä¶</span>
      </div>
    </div>
  </header>

  <main class="main" id="products">
    <section class="grid" id="productGrid" aria-live="polite"></section>
  </main>

  <footer class="footer">
    <div class="footer__inner">
      <span>¬© <span id="year"></span> <span id="brandNameFooter">Smart Home Finds</span></span>
      <span class="dot">‚Ä¢</span>
      <a href="privacy.html">Privacy</a>
      <span class="dot">‚Ä¢</span>
      <a href="https://github.com/" target="_blank" rel="noopener">Powered by GitHub Pages</a>
    </div>
  </footer>

  <template id="cardTemplate">
    <article class="card">
      <a class="card__media" target="_blank" rel="noopener">
        <img class="card__img" loading="lazy" alt="" />
        <span class="badge"></span>
      </a>

      <div class="card__body">
        <h3 class="card__title"></h3>

        <div class="card__noteToggleRow">
          <button class="noteToggle" type="button" aria-expanded="false" hidden>Short Notes</button>
        </div>

        <div class="card__notes" hidden></div>

        <div class="card__tags"></div>

        <div class="card__actions">
          <a class="link" target="_blank" rel="noopener">Open</a>
          <a class="link link--muted" target="_blank" rel="noopener">Pin</a>
        </div>
      </div>
    </article>
  </template>

  <!-- MODAL: Admin -->
  <div class="modal" id="adminModal" hidden aria-hidden="true">
    <div class="modal__overlay" data-close="admin"></div>
    <div class="modal__panel" role="dialog" aria-modal="true" aria-labelledby="adminTitle">
      <div class="modal__header">
        <h2 id="adminTitle">Modalit√† Admin</h2>
        <button class="iconbtn" type="button" data-close="admin" aria-label="Chiudi">‚úï</button>
      </div>

      <div class="modal__body">
        <p class="muted">
          La modalit√† Admin serve solo a mostrare i pulsanti ‚ÄúToken‚Äù e ‚ÄúAdd Product‚Äù.
          <b>La vera sicurezza √® il token:</b> senza un token con permessi sul tuo repo nessuno pu√≤ pubblicare.
        </p>

        <label class="field">
          <span class="field__label">PIN Admin</span>
          <input id="adminPinInput" type="password" placeholder="Inserisci PIN..." autocomplete="off" />
          <span class="field__hint">Suggerimento: √® quello che mi hai chiesto (es. Serena05).</span>
        </label>

        <div class="row">
          <button class="btn btn--primary" id="btnEnableAdmin" type="button">Abilita</button>
          <button class="btn" id="btnDisableAdmin" type="button">Disabilita</button>
        </div>

        <div class="note" id="adminStatus"></div>
      </div>
    </div>
  </div>

  <!-- MODAL: GitHub Token -->
  <div class="modal" id="tokenModal" hidden aria-hidden="true">
    <div class="modal__overlay" data-close="token"></div>
    <div class="modal__panel" role="dialog" aria-modal="true" aria-labelledby="tokenTitle">
      <div class="modal__header">
        <h2 id="tokenTitle">Connetti GitHub Token</h2>
        <button class="iconbtn" type="button" data-close="token" aria-label="Chiudi">‚úï</button>
      </div>

      <div class="modal__body">
        <p class="muted">
          Incolla un token GitHub per evitare limiti API. Viene salvato solo nel browser (localStorage), non nel repo.
        </p>

        <label class="field">
          <span class="field__label">GitHub Token</span>
          <input id="tokenInput" type="password" placeholder="github_pat_..." autocomplete="off" />
          <span class="field__hint">
            Per aggiungere prodotti dalla webapp serve un token con <b>Issues: Read and write</b>.
            Per caricare foto serve anche <b>Contents: Read and write</b>.
          </span>
        </label>

        <div class="row">
          <button class="btn btn--primary" id="btnSaveToken" type="button">Salva token</button>
          <button class="btn" id="btnClearToken" type="button">Rimuovi token</button>
        </div>

        <div class="note" id="tokenStatus"></div>
      </div>
    </div>
  </div>

  <!-- MODAL: Add Product -->
  <div class="modal" id="productModal" hidden aria-hidden="true">
    <div class="modal__overlay" data-close="product"></div>
    <div class="modal__panel modal__panel--wide" role="dialog" aria-modal="true" aria-labelledby="productTitle">
      <div class="modal__header">
        <h2 id="productTitle">Aggiungi Prodotto</h2>
        <button class="iconbtn" type="button" data-close="product" aria-label="Chiudi">‚úï</button>
      </div>

      <div class="modal__body">
        <div class="grid2">
          <label class="field">
            <span class="field__label">Titolo</span>
            <input id="pTitle" type="text" placeholder="e.g., Set of 2 Metal Wall Sconce Candle Holders" />
          </label>

          <label class="field">
            <span class="field__label">Categoria</span>
            <select id="pCategory"></select>
          </label>

          <label class="field span2">
            <span class="field__label">Pinterest Pin URL (obbligatorio)</span>
            <input id="pPinUrl" type="url" placeholder="https://pin.it/xxxx o https://www.pinterest.com/pin/..." />
          </label>

          <label class="field span2">
            <span class="field__label">Destination / Affiliate URL (opzionale)</span>
            <input id="pDestUrl" type="url" placeholder="https://amzn.to/xxxxxxx" />
            <span class="field__hint">Tip: usa il marketplace corretto (US/UK).</span>
          </label>

          <label class="field span2">
            <span class="field__label">Image URL (opzionale)</span>
            <input id="pImageUrl" type="url" placeholder="https://i.pinimg.com/...jpg" />
            <span class="field__hint">Se non carichi una foto, usa un link diretto (i.pinimg.com) cos√¨ la scheda mostra l‚Äôimmagine.</span>
          </label>

          <label class="field span2">
            <span class="field__label">Upload Image (opzionale)</span>
            <input id="pImageFile" type="file" accept="image/*" />
            <span class="field__hint">Scegli una foto dalla galleria. Richiede token con <b>Contents: Read and write</b>.</span>
          </label>

          <label class="field span2">
            <span class="field__label">Tags (separate da virgola)</span>
            <input id="pTags" type="text" placeholder="modern, minimalist, cozy, farmhouse" />
          </label>

          <label class="field span2">
            <span class="field__label">Short Notes (opzionale)</span>
            <textarea id="pNotes" rows="4" placeholder="Perch√© √® utile / dove usarlo / idea regalo‚Ä¶"></textarea>
          </label>
        </div>

        <div class="row">
          <button class="btn btn--primary" id="btnSubmitProduct" type="button">Pubblica</button>
          <button class="btn" id="btnCancelProduct" type="button" data-close="product">Annulla</button>
          <a class="btn btn--ghost" id="btnFallbackGitHub" target="_blank" rel="noopener">Apri GitHub Form</a>
        </div>

        <div class="note" id="productStatus"></div>
      </div>
    </div>
  </div>

  <script src="assets/js/app.js"></script>
</body>
</html>
